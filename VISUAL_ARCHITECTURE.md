# Visual System Architecture

## User Authentication Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    USER AUTHENTICATION FLOW                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

START
  â”‚
  â”œâ”€â†’ User clicks on project
  â”‚
  â”œâ”€â†’ Portfolio auth modal opens
  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   â”‚  Enter Email or Phone         â”‚
  â”‚   â”‚  [____________]               â”‚
  â”‚   â”‚  [Send Code]                  â”‚
  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚
  â”œâ”€â†’ Backend: Generate 6-digit code
  â”‚   - Store in Firestore (encrypted)
  â”‚   - Set 15-minute expiry
  â”‚
  â”œâ”€â†’ Send code via:
  â”‚   - Email (Gmail/Proton)  OR
  â”‚   - SMS (Twilio)
  â”‚
  â”œâ”€â†’ User receives code
  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   â”‚  Enter Verification Code      â”‚
  â”‚   â”‚  [______]                     â”‚
  â”‚   â”‚  [Verify]                     â”‚
  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚
  â”œâ”€â†’ Backend: Verify code
  â”‚   - Check it's not expired
  â”‚   - Check max 5 attempts not exceeded
  â”‚   - Mark as verified
  â”‚
  â”œâ”€â†’ Send admin notification:
  â”‚   âœ‰ï¸  Email to frankalfaro105@proton.me
  â”‚   ğŸ“± SMS to 346-282-1804
  â”‚
  â”œâ”€â†’ User sees: "Waiting for approval..."
  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   â”‚ â³ Waiting for approval      â”‚
  â”‚   â”‚ Your request is being        â”‚
  â”‚   â”‚ reviewed by Francisco        â”‚
  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚
  â””â”€â†’ Client polls every 5 seconds for approval
```

## Admin Approval Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ADMIN APPROVAL FLOW                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

NOTIFICATION RECEIVED
  â”‚
  â”œâ”€â†’ Admin receives:
  â”‚   âœ‰ï¸  Email: "New Portfolio Access Request"
  â”‚   ğŸ“± SMS: "New portfolio request - check dashboard"
  â”‚
  â”œâ”€â†’ Admin goes to: http://localhost:5000/admin
  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   â”‚ ğŸ” Admin Dashboard                       â”‚
  â”‚   â”‚                                          â”‚
  â”‚   â”‚ ğŸ“‹ Pending Approvals                     â”‚
  â”‚   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
  â”‚   â”‚ â”‚ Contact: user@example.com          â”‚   â”‚
  â”‚   â”‚ â”‚ Type: ğŸ“§ Email                     â”‚   â”‚
  â”‚   â”‚ â”‚ Location: ğŸ“ New York, USA         â”‚   â”‚
  â”‚   â”‚ â”‚ IP: 192.168.1.1                    â”‚   â”‚
  â”‚   â”‚ â”‚ [Approve] [Reject]                 â”‚   â”‚
  â”‚   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚
  â”œâ”€â†’ Admin clicks "Approve"
  â”‚
  â”œâ”€â†’ Backend:
  â”‚   - Create access_sessions record
  â”‚   - Set 20-minute expiry
  â”‚   - Mark verification as approved
  â”‚
  â”œâ”€â†’ Send user approval email
  â”‚
  â””â”€â†’ User gets notification:
     âœ… "Your access has been approved!"
        20 minutes to explore projects
```

## 20-Minute Session & Re-Authentication

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              20-MINUTE SESSION & RE-AUTHENTICATION               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

APPROVAL RECEIVED
  â”‚
  â”œâ”€â†’ User can now view projects for 20 MINUTES
  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   â”‚ âœ… Access Granted!              â”‚
  â”‚   â”‚ 20 minutes to explore          â”‚
  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚
  â”œâ”€â†’ Session stored in:
  â”‚   - Browser localStorage
  â”‚   - Firestore (encrypted)
  â”‚
  â”œâ”€â†’ Each project access logged with:
  â”‚   - Timestamp
  â”‚   - Project name
  â”‚   - IP address
  â”‚   - Location
  â”‚
  â”œâ”€â†’ 20 MINUTES PASS...
  â”‚
  â”œâ”€â†’ Session expires
  â”‚
  â”œâ”€â†’ User tries to access project
  â”‚
  â”œâ”€â†’ System detects expired session
  â”‚
  â””â”€â†’ User shown re-auth form:
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ Session Expired              â”‚
     â”‚ Provide info to continue     â”‚
     â”‚                              â”‚
     â”‚ First Name: [________]       â”‚
     â”‚ Last Name: [________]        â”‚
     â”‚ Email: [________]            â”‚
     â”‚ Phone: [________]            â”‚
     â”‚ Age: [__]                    â”‚
     â”‚                              â”‚
     â”‚ [Submit & Continue]          â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

     Backend collects:
     - Personal info (all encrypted)
     - IP address (plain)
     - Location from IP (plain)
     - Timestamp (plain)

     Session extended another 20 minutes
```

## Data Storage & Encryption

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  DATA STORAGE & ENCRYPTION                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

FIRESTORE COLLECTIONS:

â”Œâ”€ verification_requests â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚ {                                                               â”‚
â”‚   id: "abc123"                                                  â”‚
â”‚   contactInfo: "ğŸ”’ ENCRYPTED",      â† AES-256 encrypted        â”‚
â”‚   type: "email",                    â† plain text               â”‚
â”‚   verificationCode: "ğŸ”’ ENCRYPTED", â† AES-256 encrypted        â”‚
â”‚   ip: "192.168.1.1",                â† plain text               â”‚
â”‚   location: {                       â† plain text               â”‚
â”‚     city: "New York",                                          â”‚
â”‚     country: "USA"                                             â”‚
â”‚   },                                                            â”‚
â”‚   createdAt: 2024-01-03T10:00:00Z,                             â”‚
â”‚   expiresAt: 2024-01-03T10:15:00Z,                             â”‚
â”‚   verified: true,                                               â”‚
â”‚   approvalStatus: "pending"                                     â”‚
â”‚ }                                                               â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ access_sessions â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚ {                                                               â”‚
â”‚   id: "session123"                                              â”‚
â”‚   contactInfo: "ğŸ”’ ENCRYPTED",      â† AES-256 encrypted        â”‚
â”‚   approvedBy: "admin@example.com",  â† plain text               â”‚
â”‚   approvedAt: 2024-01-03T10:05:00Z,                            â”‚
â”‚   expiresAt: 2024-01-03T10:25:00Z,                             â”‚
â”‚   active: true,                                                 â”‚
â”‚   personalInfo: {                   â† all encrypted             â”‚
â”‚     firstName: "ğŸ”’ ENCRYPTED",                                  â”‚
â”‚     lastName: "ğŸ”’ ENCRYPTED",                                   â”‚
â”‚     email: "ğŸ”’ ENCRYPTED",                                      â”‚
â”‚     phone: "ğŸ”’ ENCRYPTED",                                      â”‚
â”‚     age: 25                         â† plain text               â”‚
â”‚   },                                                            â”‚
â”‚   usageLog: [                       â† plain text               â”‚
â”‚     {                                                           â”‚
â”‚       timestamp: 2024-01-03T10:05:30Z,                         â”‚
â”‚       action: "project_accessed",                              â”‚
â”‚       projectName: "My Portfolio",                             â”‚
â”‚       ip: "192.168.1.1",                                       â”‚
â”‚       location: { city: "NYC", ... }                           â”‚
â”‚     },                                                          â”‚
â”‚     ...                                                         â”‚
â”‚   ]                                                             â”‚
â”‚ }                                                               â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ENCRYPTION KEY MANAGEMENT:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ENCRYPTION KEY FLOW                          â”‚
â”‚                                                               â”‚
â”‚  Generated on first run:                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ crypto.randomBytes(16).toString('hex')                 â”‚  â”‚
â”‚  â”‚ â†’ 32-character hex string                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â†“                                    â”‚
â”‚  Stored in .env (NEVER committed to git):                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ENCRYPTION_KEY=a1b2c3d4e5f6...                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â†“                                    â”‚
â”‚  Used for AES-256-CBC encryption:                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Plain Text: "frankalfaro105@proton.me"                â”‚  â”‚
â”‚  â”‚ Encrypted: "a1b2c3d4e5f6..."                          â”‚  â”‚
â”‚  â”‚ Algorithm: AES-256-CBC                                 â”‚  â”‚
â”‚  â”‚ IV: Random 16 bytes                                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Admin Dashboard Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ADMIN DASHBOARD                             â”‚
â”‚              http://localhost:5000/admin                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ Header â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ” Admin Dashboard - Portfolio Access Control                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ Statistics â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ Total        â”‚  â”‚ Active       â”‚  â”‚ Total        â”‚          â”‚
â”‚  â”‚ Requests     â”‚  â”‚ Users        â”‚  â”‚ Access       â”‚          â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚ Events       â”‚          â”‚
â”‚  â”‚      15      â”‚  â”‚      3       â”‚  â”‚     42       â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚
â”‚  â”‚ Unique IPs   â”‚                                              â”‚
â”‚  â”‚              â”‚                                              â”‚
â”‚  â”‚       8      â”‚                                              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ Pending Approvals â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚ ğŸ“‹ PENDING APPROVALS                                            â”‚
â”‚                                                                 â”‚
â”‚ â”Œâ”€ Request 1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Contact: john@example.com                                 â”‚ â”‚
â”‚ â”‚ Type: ğŸ“§ Email                                            â”‚ â”‚
â”‚ â”‚ Location: ğŸ“ Los Angeles, USA                             â”‚ â”‚
â”‚ â”‚ IP: 203.0.113.45                                          â”‚ â”‚
â”‚ â”‚ Requested: 2024-01-03 2:45 PM                             â”‚ â”‚
â”‚ â”‚ [âœ“ Approve] [âœ— Reject]                                    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚ â”Œâ”€ Request 2 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Contact: +1 (555) 123-4567                                â”‚ â”‚
â”‚ â”‚ Type: ğŸ“± Phone                                            â”‚ â”‚
â”‚ â”‚ Location: ğŸ“ Chicago, USA                                 â”‚ â”‚
â”‚ â”‚ IP: 198.51.100.89                                         â”‚ â”‚
â”‚ â”‚ Requested: 2024-01-03 3:12 PM                             â”‚ â”‚
â”‚ â”‚ [âœ“ Approve] [âœ— Reject]                                    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ Access Logs â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚ ğŸ“Š ACCESS LOGS                                                  â”‚
â”‚                                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Contact      â”‚ Status     â”‚ Approved    â”‚ Expires         â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚ jane@ex.com  â”‚ âœ“ Active   â”‚ 2:45 PM     â”‚ 3:05 PM         â”‚ â”‚
â”‚ â”‚ bob@ex.com   â”‚ âœ— Expired  â”‚ 1:20 PM     â”‚ 1:40 PM         â”‚ â”‚
â”‚ â”‚ +1-555-6789  â”‚ âœ“ Active   â”‚ 2:10 PM     â”‚ 2:30 PM         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚ (More columns: Personal Info, Access Events)                   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

AUTO-REFRESHES EVERY 10 SECONDS â™»ï¸
```

## System Components

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   SYSTEM COMPONENTS                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

FRONTEND (User Browser)
â”‚
â”œâ”€ portfolio-auth.js
â”‚  â”œâ”€ Authentication modal
â”‚  â”œâ”€ Session management
â”‚  â”œâ”€ API communication
â”‚  â””â”€ Email/phone verification UI
â”‚
â””â”€ HTML Files (index.html, misc.html, etc.)
   â””â”€ Project links protected by auth checks


BACKEND SERVER (Node.js + Express)
â”‚
â”œâ”€ routes/
â”‚  â”œâ”€ auth.js (5 endpoints)
â”‚  â”‚  â”œâ”€ request-verification
â”‚  â”‚  â”œâ”€ verify-code
â”‚  â”‚  â”œâ”€ validate-session
â”‚  â”‚  â”œâ”€ submit-personal-info
â”‚  â”‚  â””â”€ log-access
â”‚  â”œâ”€ admin.js (4 endpoints)
â”‚  â”‚  â”œâ”€ pending-approvals
â”‚  â”‚  â”œâ”€ approve
â”‚  â”‚  â”œâ”€ reject
â”‚  â”‚  â”œâ”€ access-logs
â”‚  â”‚  â””â”€ stats
â”‚  â””â”€ access.js (1 endpoint)
â”‚     â””â”€ check
â”‚
â”œâ”€ utils/
â”‚  â”œâ”€ database.js (Firestore operations)
â”‚  â”œâ”€ encryption.js (AES-256)
â”‚  â”œâ”€ emailService.js (Gmail, Proton, Outlook)
â”‚  â””â”€ helpers.js (IP, location, codes)
â”‚
â”œâ”€ config/
â”‚  â””â”€ firebase.js (Firebase initialization)
â”‚
â””â”€ admin-dashboard/
   â””â”€ index.html (Admin panel UI)


EXTERNAL SERVICES
â”‚
â”œâ”€ Firebase Firestore
â”‚  â”œâ”€ verification_requests collection
â”‚  â”œâ”€ access_sessions collection
â”‚  â””â”€ Complete audit logs
â”‚
â”œâ”€ Email Service
â”‚  â”œâ”€ Gmail (SMTP)
â”‚  â”œâ”€ ProtonMail (SMTP)
â”‚  â”œâ”€ Outlook (SMTP)
â”‚  â””â”€ Custom SMTP
â”‚
â””â”€ Twilio SMS
   â”œâ”€ Phone verification codes
   â””â”€ Admin notifications


COMMUNICATION FLOW

User Browser
    â”‚
    â”œâ”€ POST /api/auth/request-verification
    â”‚   â”‚
    â”‚   â”œâ”€ Backend generates code
    â”‚   â”œâ”€ Backend stores in Firestore
    â”‚   â”œâ”€ Backend sends code via email/SMS
    â”‚   â””â”€ Response with requestId
    â”‚
    â”œâ”€ POST /api/auth/verify-code
    â”‚   â”‚
    â”‚   â”œâ”€ Backend verifies code
    â”‚   â”œâ”€ Backend sends admin notification
    â”‚   â””â”€ Response: waiting for approval
    â”‚
    â”œâ”€ Poll /api/admin/request-status (every 5 sec)
    â”‚   â”‚
    â”‚   â””â”€ Response: approved/rejected/pending
    â”‚
    â””â”€ POST /api/auth/log-access
        â”‚
        â””â”€ Backend logs project access


NOTIFICATION FLOW

Backend â”€â”€â”€ Email â”€â”€â†’ Admin (frankalfaro105@proton.me)
          â”€â”€â”€ SMS â”€â”€â†’ Admin (346-282-1804)

Admin â”€â”€â”€â”€â†’ [Approves in Dashboard]
         â”‚
         â””â”€â”€ Email â”€â”€â†’ User (approval notification)
          â”€â”€ SMS â”€â”€â†’ User (optional)
```

---

## Security Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 SECURITY ARCHITECTURE                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

LAYER 1: TRANSPORT SECURITY
â”œâ”€ HTTPS (required in production)
â””â”€ TLS 1.2+ encryption

LAYER 2: API SECURITY
â”œâ”€ CORS validation (allowed domains only)
â”œâ”€ Content-Type validation (JSON only)
â””â”€ Admin endpoints require x-admin-key header

LAYER 3: DATA SECURITY
â”œâ”€ Sensitive fields encrypted with AES-256
â”œâ”€ Encryption key stored in .env (never in code)
â”œâ”€ Firebase security rules (read/write restricted)
â””â”€ No sensitive data in logs

LAYER 4: SESSION SECURITY
â”œâ”€ Sessions tied to browser/localStorage
â”œâ”€ Sessions expire after 20 minutes
â”œâ”€ Sessions tied to verification requests
â””â”€ Session ID unguessable

LAYER 5: RATE LIMITING
â”œâ”€ Max 5 failed verification attempts
â”œâ”€ Code expires after 15 minutes
â”œâ”€ Automatic retry after timeout
â””â”€ IP-based tracking

LAYER 6: AUTHENTICATION
â”œâ”€ Email/Phone verification (2FA)
â”œâ”€ Code must be entered correctly
â”œâ”€ Admin manual approval required
â””â”€ User cannot bypass approval

ENCRYPTION IN DETAIL:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         PLAINTEXT DATA                  â”‚
â”‚ email: "frankalfaro105@proton.me"      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”œâ”€ Algorithm: AES-256-CBC
                   â”œâ”€ Key: from ENCRYPTION_KEY
                   â”œâ”€ IV: Random 16 bytes
                   â””â”€ Mode: CBC
                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      CIPHERTEXT (stored in DB)           â”‚
â”‚ "a1b2c3d4e5f6:7g8h9i0j1k2l3m4n5o6p7q8" â”‚
â”‚  (IV:ENCRYPTED_DATA)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

To decrypt:
1. Get ENCRYPTION_KEY from .env
2. Split IV and encrypted data
3. Use crypto.createDecipheriv()
4. Get plaintext

Without ENCRYPTION_KEY: IMPOSSIBLE TO DECRYPT
```

---

This visual guide shows the complete flow of your authentication system!
